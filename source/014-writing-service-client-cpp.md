<div id="interwiki"><span>[Wiki](/Documentation)</span></div>

*   [ROS](/ROS)
*   [Tutorials](/ROS/Tutorials)
*   [WritingServiceClient(c++)](/action/fullsearch/ROS/Tutorials/WritingServiceClient%28c%2B%2B%29?action=fullsearch&context=180&value=linkto%3A%22ROS%2FTutorials%2FWritingServiceClient%28c%2B%2B%29%22 "Click to do a full-text search for this title")

<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span><span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span>

<span class="anchor" id="line-1-1"></span><span class="anchor" id="line-2-1"></span>

<div>

<table>

<tbody>

<tr>

<td style="background-color: #cce0ff">**Note:** This tutorial assumes that you have completed the previous tutorials: [examining the simple publisher and subscriber](/ROS/Tutorials/ExaminingPublisherSubscriber).</td>

</tr>

</tbody>

</table>

</div>

<span class="anchor" id="line-3-1"></span><span class="anchor" id="line-4-1"></span><span class="anchor" id="line-5-1"></span><span class="anchor" id="line-6-1"></span>

<div>

<table>

<tbody>

<tr>

<td style="background-color: #bbceee">![(!)](/moin_static197/rostheme/img/idea.png "(!)")It is appreciated that problems/questions regarding this tutorial are asked on [answers.ros.org](http://answers.ros.org). Don't forget to include in your question the link to this page, versions of your OS & ROS, and also add appropriate tags.</td>

</tr>

</tbody>

</table>

</div>

<span class="anchor" id="line-7-1"></span><span class="anchor" id="line-8-1"></span><span class="anchor" id="line-9-1"></span>

## Writing a Simple Service and Client (C++)

<span class="anchor" id="line-10-1"></span>**Description:** This tutorial covers how to write a service and client node in C++.  

<span class="anchor" id="line-11-1"></span><span class="anchor" id="line-12-1"></span><span class="anchor" id="line-13-1"></span><span class="anchor" id="line-14-1"></span>**Tutorial Level:** BEGINNER  

<span class="anchor" id="line-15-1"></span><span class="anchor" id="line-16-1"></span>**Next Tutorial:** [Examining the simple service and client](/ROS/Tutorials/ExaminingServiceClient)  

<span class="anchor" id="line-17-1"></span>

<span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span>

<script type="text/javascript"><!-- // @@ Buildsystem macro function Buildsystem(sections) { var dotversion = ".buildsystem." // Tag shows unless already tagged $.each(sections.show, function() { $("div" + dotversion + this).not(".versionshow,.versionhide").addClass("versionshow") } ) // Tag hides unless already tagged $.each(sections.hide, function() { $("div" + dotversion + this).not(".versionshow,.versionhide").addClass("versionhide") } ) // Show or hide according to tag $(".versionshow").removeClass("versionshow").filter("div").show() $(".versionhide").removeClass("versionhide").filter("div").hide() } function getURLParameter(name) { return decodeURIComponent( ( new RegExp( '[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)' ).exec(location.search) || [,""] )[1].replace(/\+/g, '%20') ) || null; } $(document).ready(function() { var activesystem = "catkin"; var url_distro = getURLParameter('buildsystem'); if (url_distro) { activesystem = url_distro; } $("div.buildsystem").not("."+activesystem).hide(); $("#"+activesystem).click(); $("input.version:hidden").each(function() { var bg = $(this).attr("value").split(":"); $("div.version." + bg[0]).css("background-color", bg[1]).removeClass(bg[0]) }); }) // --></script> <span class="btn-group"><button id="catkin" class="btn btn-default" onclick="Buildsystem({show:['catkin'], hide:['rosbuild']});this.style.color='#e6e6e6';this.style.background='#3e4f6e';document.getElementById('rosbuild').style.background='#e6e6e6';document.getElementById('rosbuild').style.color='#3e4f6e';return false">catkin</button> <button id="rosbuild" class="btn btn-default" onclick="Buildsystem({show:['rosbuild'], hide:['catkin']});this.style.color='#e6e6e6';this.style.background='#3e4f6e';document.getElementById('catkin').style.background='#e6e6e6';document.getElementById('catkin').style.color='#3e4f6e';return false">rosbuild</button></span><span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span>

<div class="table-of-contents">

Contents

1.  [Writing a Service Node](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.Writing_a_Service_Node)
    1.  [The Code](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.The_Code)
    2.  [The Code Explained](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.The_Code_Explained)
2.  [Writing the Client Node](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.Writing_the_Client_Node)
    1.  [The Code](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.The_Code-1)
    2.  [The Code Explained](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.The_Code_Explained-1)
3.  [Building your nodes](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.Building_your_nodes)
4.  [Building your nodes](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.Building_your_nodes-1)

</div>

<span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span>

<div dir="ltr" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.content" lang="en"><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.top"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2"></span>

### Writing a Service Node

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3"></span>

Here we'll create the service ("add_two_ints_server") node which will receive two ints and return the sum.<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-6"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-7"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-8"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-9"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-10"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-11"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-12"></span>

<div class="buildsystem rosbuild"><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-1"></span>

Change directory into the beginner_tutorials package, you created previously in the [creating a rosbuild package](/ROS/Tutorials/CreatingPackage) tutorial:<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-1"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-1"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-1"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-1"></span>

<pre><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-2"></span>roscd beginner_tutorials</pre>

</div>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-13"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-14"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-15"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-16"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-17"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-18"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-19"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-20"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-21"></span>

<div class="buildsystem catkin"><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-3"></span>

Change directories to your beginner_tutorials package you created in your catkin workspace previous tutorials:<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-2"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-2"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-2"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-2"></span>

<pre><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-4"></span>cd ~/catkin_ws/src/beginner_tutorials</pre>

</div>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-22"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-23"></span>

Please make sure you have followed the directions in the previous tutorial for creating the service needed in this tutorial, [creating the AddTwoInts.srv](/ROS/Tutorials/CreatingMsgAndSrv#Creating_a_srv) (be sure to choose the right version of build tool you're using at the top of wiki page in the link).<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-24"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-25"></span>

#### The Code

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-26"></span>

Create the src/add_two_ints_server.cpp file within the beginner_tutorials package and paste the following inside it:<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-27"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-28"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-29"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-30"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-31"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-32"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-33"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-34"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-35"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-36"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-37"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-38"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-39"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-40"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-41"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-42"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-43"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-44"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-45"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-46"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-47"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-48"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-49"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-50"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-51"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-52"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-53"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-5"></span>

<div class="highlight cpp">

<div class="codearea" dir="ltr" lang="en"><script type="text/javascript">function isnumbered(obj) { return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber'; } function nformat(num,chrs,add) { var nlen = Math.max(0,chrs-(''+num).length), res = ''; while (nlen>0) { res += ' '; nlen-- } return res+num+add; } function addnumber(did, nstart, nstep) { var c = document.getElementById(did), l = c.firstChild, n = 1; if (!isnumbered(c)) { if (typeof nstart == 'undefined') nstart = 1; if (typeof nstep == 'undefined') nstep = 1; var n = nstart; while (l != null) { if (l.tagName == 'SPAN') { var s = document.createElement('SPAN'); var a = document.createElement('A'); s.className = 'LineNumber'; a.appendChild(document.createTextNode(nformat(n,4,''))); a.href = '#' + did + '_' + n; s.appendChild(a); s.appendChild(document.createTextNode(' ')); n += nstep; if (l.childNodes.length) { l.insertBefore(s, l.firstChild); } else { l.appendChild(s); } } l = l.nextSibling; } } return false; } function remnumber(did) { var c = document.getElementById(did), l = c.firstChild; if (isnumbered(c)) { while (l != null) { if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild); l = l.nextSibling; } } return false; } function togglenumber(did, nstart, nstep) { var c = document.getElementById(did); if (isnumbered(c)) { remnumber(did); } else { addnumber(did,nstart,nstep); } return false; }</script> <script type="text/javascript">document.write('<a href="#" onclick="return togglenumber(\'roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a\', 1, 1);" \ class="codenumbers">Toggle line numbers<\/a>');</script>

<pre dir="ltr" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a" lang="en"><span class="line"><span class="LineNumber">[1](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_1)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_1"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-6"></span><span class="Preprc">#</span><span class="Preprc">include "ros</span><span class="Preprc">/</span><span class="Preprc">ros.h"</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber">[2](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_2)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_2"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-3"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include "beginner_tutorials</span><span class="Preprc">/</span><span class="Preprc">AddTwoInts.h"</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber">[3](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_3)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_3"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-3"></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber">[4](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_4)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_4"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-3"></span><span class="ResWord">bool</span> <span class="ID">add</span>(<span class="ID">beginner_tutorials</span>::<span class="ID">AddTwoInts</span>::<span class="ID">Request</span>  &<span class="ID">req</span>,</span>
<span class="line"><span class="LineNumber">[5](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_5)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_5"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-3"></span>         <span class="ID">beginner_tutorials</span>::<span class="ID">AddTwoInts</span>::<span class="ID">Response</span> &<span class="ID">res</span>)</span>
<span class="line"><span class="LineNumber">[6](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_6)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_6"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-6-1"></span>{</span>
<span class="line"><span class="LineNumber">[7](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_7)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_7"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-7-1"></span>  <span class="ID">res</span>.<span class="ID">sum</span> = <span class="ID">req</span>.<span class="ID">a</span> + <span class="ID">req</span>.<span class="ID">b</span>;</span>
<span class="line"><span class="LineNumber">[8](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_8)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_8"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-8-1"></span>  <span class="ID">ROS_INFO</span>(<span class="String">"</span><span class="String">request: x=%ld, y=%ld</span><span class="String">"</span>, (<span class="ResWord">long</span> <span class="ResWord">int</span>)<span class="ID">req</span>.<span class="ID">a</span>, (<span class="ResWord">long</span> <span class="ResWord">int</span>)<span class="ID">req</span>.<span class="ID">b</span>);</span>
<span class="line"><span class="LineNumber">[9](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_9)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_9"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-9-1"></span>  <span class="ID">ROS_INFO</span>(<span class="String">"</span><span class="String">sending back response: [%ld]</span><span class="String">"</span>, (<span class="ResWord">long</span> <span class="ResWord">int</span>)<span class="ID">res</span>.<span class="ID">sum</span>);</span>
<span class="line"><span class="LineNumber">[10](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_10)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_10"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-10-1"></span>  <span class="ResWord">return</span> <span class="ConsWord">true</span>;</span>
<span class="line"><span class="LineNumber">[11](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_11)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_11"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-11-1"></span>}</span>
<span class="line"><span class="LineNumber">[12](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_12)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_12"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-12-1"></span></span>
<span class="line"><span class="LineNumber">[13](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_13)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_13"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-13-1"></span><span class="ResWord">int</span> <span class="ID">main</span>(<span class="ResWord">int</span> <span class="ID">argc</span>, <span class="ResWord">char</span> **<span class="ID">argv</span>)</span>
<span class="line"><span class="LineNumber">[14](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_14)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_14"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-14-1"></span>{</span>
<span class="line"><span class="LineNumber">[15](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_15)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_15"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-15-1"></span>  <span class="ID">ros</span>::<span class="ID">init</span>(<span class="ID">argc</span>, <span class="ID">argv</span>, <span class="String">"</span><span class="String">add_two_ints_server</span><span class="String">"</span>);</span>
<span class="line"><span class="LineNumber">[16](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_16)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_16"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-16-1"></span>  <span class="ID">ros</span>::<span class="ID">NodeHandle</span> <span class="ID">n</span>;</span>
<span class="line"><span class="LineNumber">[17](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_17)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_17"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-17-1"></span></span>
<span class="line"><span class="LineNumber">[18](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_18)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_18"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-18-1"></span>  <span class="ID">ros</span>::<span class="ID">ServiceServer</span> <span class="ID">service</span> = <span class="ID">n</span>.<span class="ID">advertiseService</span>(<span class="String">"</span><span class="String">add_two_ints</span><span class="String">"</span>, <span class="ID">add</span>);</span>
<span class="line"><span class="LineNumber">[19](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_19)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_19"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-19-1"></span>  <span class="ID">ROS_INFO</span>(<span class="String">"</span><span class="String">Ready to add two ints.</span><span class="String">"</span>);</span>
<span class="line"><span class="LineNumber">[20](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_20)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_20"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-20-1"></span>  <span class="ID">ros</span>::<span class="ID">spin</span>();</span>
<span class="line"><span class="LineNumber">[21](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_21)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_21"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-21-1"></span></span>
<span class="line"><span class="LineNumber">[22](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_22)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_22"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-22-1"></span>  <span class="ResWord">return</span> <span class="Number">0</span>;</span>
<span class="line"><span class="LineNumber">[23](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_23)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-51b90df3945605c351da24a5ec712323d4d3dc5a_23"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-23-1"></span>}</span>
</pre>

</div>

</div>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-54"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-55"></span>

#### The Code Explained

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-56"></span>

Now, let's break the code down.<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-57"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-58"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-7"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-4"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-4"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-4"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-4"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-8"></span>

<div class="highlight cpp">

<div class="codearea" dir="ltr" lang="en"><script type="text/javascript">document.write('<a href="#" onclick="return togglenumber(\'roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-44045d249f9a09eed4ca0e3c86767fcc080379f7\', 1, 1);" \ class="codenumbers">Toggle line numbers<\/a>');</script>

<pre dir="ltr" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-44045d249f9a09eed4ca0e3c86767fcc080379f7" lang="en"><span class="line"><span class="LineNumber">[1](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-44045d249f9a09eed4ca0e3c86767fcc080379f7_1)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-44045d249f9a09eed4ca0e3c86767fcc080379f7_1"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-9"></span><span class="Preprc">#</span><span class="Preprc">include "ros</span><span class="Preprc">/</span><span class="Preprc">ros.h"</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber">[2](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-44045d249f9a09eed4ca0e3c86767fcc080379f7_2)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-44045d249f9a09eed4ca0e3c86767fcc080379f7_2"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-5"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include "beginner_tutorials</span><span class="Preprc">/</span><span class="Preprc">AddTwoInts.h"</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber">[3](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-44045d249f9a09eed4ca0e3c86767fcc080379f7_3)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-44045d249f9a09eed4ca0e3c86767fcc080379f7_3"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-5"></span><span class="Preprc"></span></span>
</pre>

</div>

</div>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-6-2"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-59"></span><tt class="backtick">beginner_tutorials/AddTwoInts.h</tt> is the header file generated from the srv file that we created earlier.<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-60"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-61"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-10"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-6"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-6"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-5"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-5"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-11"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-7"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-7"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-6"></span>

<div class="highlight cpp">

<div class="codearea" dir="ltr" lang="en"><script type="text/javascript">document.write('<a href="#" onclick="return togglenumber(\'roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-c703b7a0cd73dc5e242b12211e5ef7ade318e6f7\', 4, 1);" \ class="codenumbers">Toggle line numbers<\/a>');</script>

<pre dir="ltr" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-c703b7a0cd73dc5e242b12211e5ef7ade318e6f7" lang="en"><span class="line"><span class="LineNumber">[4](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-c703b7a0cd73dc5e242b12211e5ef7ade318e6f7_4)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-c703b7a0cd73dc5e242b12211e5ef7ade318e6f7_4"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-12"></span><span class="ResWord">bool</span> <span class="ID">add</span>(<span class="ID">beginner_tutorials</span>::<span class="ID">AddTwoInts</span>::<span class="ID">Request</span>  &<span class="ID">req</span>,</span>
<span class="line"><span class="LineNumber">[5](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-c703b7a0cd73dc5e242b12211e5ef7ade318e6f7_5)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-c703b7a0cd73dc5e242b12211e5ef7ade318e6f7_5"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-8"></span>         <span class="ID">beginner_tutorials</span>::<span class="ID">AddTwoInts</span>::<span class="ID">Response</span> &<span class="ID">res</span>)</span>
</pre>

</div>

</div>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-6-3"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-62"></span>This function provides the service for adding two ints, it takes in the request and response type defined in the srv file and returns a boolean.<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-63"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-64"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-13"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-9"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-8"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-7"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-6"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-6-4"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-7-2"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-8-2"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-9-2"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-14"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-10"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-9"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-8"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-7"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-6-5"></span>

<div class="highlight cpp">

<div class="codearea" dir="ltr" lang="en"><script type="text/javascript">document.write('<a href="#" onclick="return togglenumber(\'roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-cab6c9ffa40cf9bd42fef4448b31f6feaa24464c\', 6, 1);" \ class="codenumbers">Toggle line numbers<\/a>');</script>

<pre dir="ltr" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-cab6c9ffa40cf9bd42fef4448b31f6feaa24464c" lang="en"><span class="line"><span class="LineNumber">[6](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-cab6c9ffa40cf9bd42fef4448b31f6feaa24464c_6)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-cab6c9ffa40cf9bd42fef4448b31f6feaa24464c_6"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-15"></span>{</span>
<span class="line"><span class="LineNumber">[7](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-cab6c9ffa40cf9bd42fef4448b31f6feaa24464c_7)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-cab6c9ffa40cf9bd42fef4448b31f6feaa24464c_7"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-11"></span>  <span class="ID">res</span>.<span class="ID">sum</span> = <span class="ID">req</span>.<span class="ID">a</span> + <span class="ID">req</span>.<span class="ID">b</span>;</span>
<span class="line"><span class="LineNumber">[8](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-cab6c9ffa40cf9bd42fef4448b31f6feaa24464c_8)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-cab6c9ffa40cf9bd42fef4448b31f6feaa24464c_8"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-10"></span>  <span class="ID">ROS_INFO</span>(<span class="String">"</span><span class="String">request: x=%ld, y=%ld</span><span class="String">"</span>, (<span class="ResWord">long</span> <span class="ResWord">int</span>)<span class="ID">req</span>.<span class="ID">a</span>, (<span class="ResWord">long</span> <span class="ResWord">int</span>)<span class="ID">req</span>.<span class="ID">b</span>);</span>
<span class="line"><span class="LineNumber">[9](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-cab6c9ffa40cf9bd42fef4448b31f6feaa24464c_9)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-cab6c9ffa40cf9bd42fef4448b31f6feaa24464c_9"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-9"></span>  <span class="ID">ROS_INFO</span>(<span class="String">"</span><span class="String">sending back response: [%ld]</span><span class="String">"</span>, (<span class="ResWord">long</span> <span class="ResWord">int</span>)<span class="ID">res</span>.<span class="ID">sum</span>);</span>
<span class="line"><span class="LineNumber">[10](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-cab6c9ffa40cf9bd42fef4448b31f6feaa24464c_10)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-cab6c9ffa40cf9bd42fef4448b31f6feaa24464c_10"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-8"></span>  <span class="ResWord">return</span> <span class="ConsWord">true</span>;</span>
<span class="line"><span class="LineNumber">[11](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-cab6c9ffa40cf9bd42fef4448b31f6feaa24464c_11)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-cab6c9ffa40cf9bd42fef4448b31f6feaa24464c_11"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-6-6"></span>}</span>
</pre>

</div>

</div>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-10-2"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-65"></span>Here the two ints are added and stored in the response. Then some information about the request and response are logged. Finally the service returns true when it is complete.<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-66"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-67"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-16"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-12"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-11"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-10"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-17"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-13"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-12"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-11"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-9"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-6-7"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-7-3"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-8-3"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-9-3"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-10-3"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-11-2"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-12-2"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-13-2"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-14-2"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-15-2"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-16-2"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-17-2"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-18-2"></span>

<div class="highlight cpp">

<div class="codearea" dir="ltr" lang="en"><script type="text/javascript">document.write('<a href="#" onclick="return togglenumber(\'roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-ac5d6b9af10384158d452506d30df9e87f3dbd88\', 18, 1);" \ class="codenumbers">Toggle line numbers<\/a>');</script>

<pre dir="ltr" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-ac5d6b9af10384158d452506d30df9e87f3dbd88" lang="en"><span class="line"><span class="LineNumber">[18](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-ac5d6b9af10384158d452506d30df9e87f3dbd88_18)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-ac5d6b9af10384158d452506d30df9e87f3dbd88_18"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-18"></span>  <span class="ID">ros</span>::<span class="ID">ServiceServer</span> <span class="ID">service</span> = <span class="ID">n</span>.<span class="ID">advertiseService</span>(<span class="String">"</span><span class="String">add_two_ints</span><span class="String">"</span>, <span class="ID">add</span>);</span>
</pre>

</div>

</div>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-10"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-68"></span>Here the service is created and advertised over ROS.<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-69"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-70"></span>

### Writing the Client Node

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-71"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-72"></span>

#### The Code

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-73"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-74"></span>

Create the src/add_two_ints_client.cpp file within the beginner_tutorials package and paste the following inside it:<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-75"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-76"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-77"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-78"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-79"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-80"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-81"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-82"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-83"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-84"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-85"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-86"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-87"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-88"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-89"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-90"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-91"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-92"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-93"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-94"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-95"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-96"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-97"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-98"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-99"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-100"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-101"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-102"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-103"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-104"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-105"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-106"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-107"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-108"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-19"></span>

<div class="highlight cpp">

<div class="codearea" dir="ltr" lang="en"><script type="text/javascript">document.write('<a href="#" onclick="return togglenumber(\'roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4\', 1, 1);" \ class="codenumbers">Toggle line numbers<\/a>');</script>

<pre dir="ltr" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4" lang="en"><span class="line"><span class="LineNumber">[1](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_1)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_1"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-20"></span><span class="Preprc">#</span><span class="Preprc">include "ros</span><span class="Preprc">/</span><span class="Preprc">ros.h"</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber">[2](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_2)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_2"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-14"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include "beginner_tutorials</span><span class="Preprc">/</span><span class="Preprc">AddTwoInts.h"</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber">[3](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_3)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_3"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-13"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include <cstdlib></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber">[4](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_4)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_4"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-12"></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber">[5](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_5)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_5"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-11"></span><span class="ResWord">int</span> <span class="ID">main</span>(<span class="ResWord">int</span> <span class="ID">argc</span>, <span class="ResWord">char</span> **<span class="ID">argv</span>)</span>
<span class="line"><span class="LineNumber">[6](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_6)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_6"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-6-8"></span>{</span>
<span class="line"><span class="LineNumber">[7](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_7)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_7"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-7-4"></span>  <span class="ID">ros</span>::<span class="ID">init</span>(<span class="ID">argc</span>, <span class="ID">argv</span>, <span class="String">"</span><span class="String">add_two_ints_client</span><span class="String">"</span>);</span>
<span class="line"><span class="LineNumber">[8](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_8)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_8"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-8-4"></span>  <span class="ResWord">if</span> (<span class="ID">argc</span> != <span class="Number">3</span>)</span>
<span class="line"><span class="LineNumber">[9](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_9)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_9"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-9-4"></span>  {</span>
<span class="line"><span class="LineNumber">[10](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_10)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_10"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-10-4"></span>    <span class="ID">ROS_INFO</span>(<span class="String">"</span><span class="String">usage: add_two_ints_client X Y</span><span class="String">"</span>);</span>
<span class="line"><span class="LineNumber">[11](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_11)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_11"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-11-3"></span>    <span class="ResWord">return</span> <span class="Number">1</span>;</span>
<span class="line"><span class="LineNumber">[12](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_12)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_12"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-12-3"></span>  }</span>
<span class="line"><span class="LineNumber">[13](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_13)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_13"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-13-3"></span></span>
<span class="line"><span class="LineNumber">[14](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_14)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_14"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-14-3"></span>  <span class="ID">ros</span>::<span class="ID">NodeHandle</span> <span class="ID">n</span>;</span>
<span class="line"><span class="LineNumber">[15](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_15)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_15"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-15-3"></span>  <span class="ID">ros</span>::<span class="ID">ServiceClient</span> <span class="ID">client</span> = <span class="ID">n</span>.<span class="ID">serviceClient</span><<span class="ID">beginner_tutorials</span>::<span class="ID">AddTwoInts</span>>(<span class="String">"</span><span class="String">add_two_ints</span><span class="String">"</span>);</span>
<span class="line"><span class="LineNumber">[16](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_16)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_16"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-16-3"></span>  <span class="ID">beginner_tutorials</span>::<span class="ID">AddTwoInts</span> <span class="ID">srv</span>;</span>
<span class="line"><span class="LineNumber">[17](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_17)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_17"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-17-3"></span>  <span class="ID">srv</span>.<span class="ID">request</span>.<span class="ID">a</span> = <span class="ID">atoll</span>(<span class="ID">argv</span>[<span class="Number">1</span>]);</span>
<span class="line"><span class="LineNumber">[18](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_18)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_18"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-18-3"></span>  <span class="ID">srv</span>.<span class="ID">request</span>.<span class="ID">b</span> = <span class="ID">atoll</span>(<span class="ID">argv</span>[<span class="Number">2</span>]);</span>
<span class="line"><span class="LineNumber">[19](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_19)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_19"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-19-2"></span>  <span class="ResWord">if</span> (<span class="ID">client</span>.<span class="ID">call</span>(<span class="ID">srv</span>))</span>
<span class="line"><span class="LineNumber">[20](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_20)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_20"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-20-2"></span>  {</span>
<span class="line"><span class="LineNumber">[21](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_21)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_21"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-21-2"></span>    <span class="ID">ROS_INFO</span>(<span class="String">"</span><span class="String">Sum: %ld</span><span class="String">"</span>, (<span class="ResWord">long</span> <span class="ResWord">int</span>)<span class="ID">srv</span>.<span class="ID">response</span>.<span class="ID">sum</span>);</span>
<span class="line"><span class="LineNumber">[22](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_22)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_22"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-22-2"></span>  }</span>
<span class="line"><span class="LineNumber">[23](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_23)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_23"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-23-2"></span>  <span class="ResWord">else</span></span>
<span class="line"><span class="LineNumber">[24](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_24)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_24"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-24-1"></span>  {</span>
<span class="line"><span class="LineNumber">[25](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_25)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_25"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-25-1"></span>    <span class="ID">ROS_ERROR</span>(<span class="String">"</span><span class="String">Failed to call service add_two_ints</span><span class="String">"</span>);</span>
<span class="line"><span class="LineNumber">[26](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_26)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_26"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-26-1"></span>    <span class="ResWord">return</span> <span class="Number">1</span>;</span>
<span class="line"><span class="LineNumber">[27](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_27)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_27"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-27-1"></span>  }</span>
<span class="line"><span class="LineNumber">[28](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_28)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_28"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-28-1"></span></span>
<span class="line"><span class="LineNumber">[29](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_29)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_29"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-29-1"></span>  <span class="ResWord">return</span> <span class="Number">0</span>;</span>
<span class="line"><span class="LineNumber">[30](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_30)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-f2a39abe84f67d951ff455fdbeda1ad12e9783e4_30"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-30-1"></span>}</span>
</pre>

</div>

</div>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-109"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-110"></span>

#### The Code Explained

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-111"></span>

Now, let's break the code down.<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-112"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-113"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-114"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-21"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-15"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-14"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-13"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-22"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-16"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-15"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-14"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-12"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-6-9"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-7-5"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-8-5"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-9-5"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-10-5"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-11-4"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-12-4"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-13-4"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-14-4"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-15-4"></span>

<div class="highlight cpp">

<div class="codearea" dir="ltr" lang="en"><script type="text/javascript">document.write('<a href="#" onclick="return togglenumber(\'roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-ae5c23e9275f52f11e35b1c440a1b28eb4e05c6b\', 15, 1);" \ class="codenumbers">Toggle line numbers<\/a>');</script>

<pre dir="ltr" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-ae5c23e9275f52f11e35b1c440a1b28eb4e05c6b" lang="en"><span class="line"><span class="LineNumber">[15](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-ae5c23e9275f52f11e35b1c440a1b28eb4e05c6b_15)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-ae5c23e9275f52f11e35b1c440a1b28eb4e05c6b_15"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-23"></span>  <span class="ID">ros</span>::<span class="ID">ServiceClient</span> <span class="ID">client</span> = <span class="ID">n</span>.<span class="ID">serviceClient</span><<span class="ID">beginner_tutorials</span>::<span class="ID">AddTwoInts</span>>(<span class="String">"</span><span class="String">add_two_ints</span><span class="String">"</span>);</span>
</pre>

</div>

</div>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-13"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-115"></span>This creates a client for the <tt class="backtick">add_two_ints</tt> service. The <tt class="backtick">ros::ServiceClient</tt> object is used to call the service later on.<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-116"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-117"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-24"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-17"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-16"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-15"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-14"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-6-10"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-25"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-18"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-17"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-16"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-15"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-6-11"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-7-6"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-8-6"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-9-6"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-10-6"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-11-5"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-12-5"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-13-5"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-14-5"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-15-5"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-16-4"></span>

<div class="highlight cpp">

<div class="codearea" dir="ltr" lang="en"><script type="text/javascript">document.write('<a href="#" onclick="return togglenumber(\'roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-6c61651582a4391fbbdc9c59b97b6557ba35c65a\', 16, 1);" \ class="codenumbers">Toggle line numbers<\/a>');</script>

<pre dir="ltr" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-6c61651582a4391fbbdc9c59b97b6557ba35c65a" lang="en"><span class="line"><span class="LineNumber">[16](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-6c61651582a4391fbbdc9c59b97b6557ba35c65a_16)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-6c61651582a4391fbbdc9c59b97b6557ba35c65a_16"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-26"></span>  <span class="ID">beginner_tutorials</span>::<span class="ID">AddTwoInts</span> <span class="ID">srv</span>;</span>
<span class="line"><span class="LineNumber">[17](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-6c61651582a4391fbbdc9c59b97b6557ba35c65a_17)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-6c61651582a4391fbbdc9c59b97b6557ba35c65a_17"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-19"></span>  <span class="ID">srv</span>.<span class="ID">request</span>.<span class="ID">a</span> = <span class="ID">atoll</span>(<span class="ID">argv</span>[<span class="Number">1</span>]);</span>
<span class="line"><span class="LineNumber">[18](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-6c61651582a4391fbbdc9c59b97b6557ba35c65a_18)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-6c61651582a4391fbbdc9c59b97b6557ba35c65a_18"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-18"></span>  <span class="ID">srv</span>.<span class="ID">request</span>.<span class="ID">b</span> = <span class="ID">atoll</span>(<span class="ID">argv</span>[<span class="Number">2</span>]);</span>
</pre>

</div>

</div>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-7-7"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-118"></span>Here we instantiate an autogenerated service class, and assign values into its request member. A service class contains two members, <tt class="backtick">request</tt> and <tt class="backtick">response</tt>. It also contains two class definitions, <tt class="backtick">Request</tt> and <tt class="backtick">Response</tt>.<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-119"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-120"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-121"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-27"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-20"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-19"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-17"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-28"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-21"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-20"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-18"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-16"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-6-12"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-7-8"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-8-7"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-9-7"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-10-7"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-11-6"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-12-6"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-13-6"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-14-6"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-15-6"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-16-5"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-17-4"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-18-4"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-19-3"></span>

<div class="highlight cpp">

<div class="codearea" dir="ltr" lang="en"><script type="text/javascript">document.write('<a href="#" onclick="return togglenumber(\'roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-449923a1ec1e665c95b5e8fe0e72050ab09d0f7a\', 19, 1);" \ class="codenumbers">Toggle line numbers<\/a>');</script>

<pre dir="ltr" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-449923a1ec1e665c95b5e8fe0e72050ab09d0f7a" lang="en"><span class="line"><span class="LineNumber">[19](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-449923a1ec1e665c95b5e8fe0e72050ab09d0f7a_19)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-449923a1ec1e665c95b5e8fe0e72050ab09d0f7a_19"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-29"></span>  <span class="ResWord">if</span> (<span class="ID">client</span>.<span class="ID">call</span>(<span class="ID">srv</span>))</span>
</pre>

</div>

</div>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-17"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-122"></span>This actually calls the service. Since service calls are blocking, it will return once the call is done. If the service call succeeded, <tt class="backtick">call()</tt> will return true and the value in <tt class="backtick">srv.response</tt> will be valid. If the call did not succeed, <tt class="backtick">call()</tt> will return false and the value in <tt class="backtick">srv.response</tt> will be invalid.<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-123"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-124"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-125"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-126"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-127"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-128"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-129"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-130"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-131"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-132"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-133"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-134"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-135"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-136"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-137"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-138"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-139"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-140"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-141"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-142"></span>

<div class="buildsystem rosbuild"><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-30"></span>

### Building your nodes

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-22"></span>

Again edit the beginner_tutorials CMakeLists.txt:<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-21"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-19"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-18"></span>

<pre><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-31"></span>$ rosed beginner_tutorials CMakeLists.txt </pre>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-6-13"></span>

and add the following at the end:<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-7-9"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-8-8"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-9-8"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-10-8"></span>

<pre><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-32"></span>rosbuild_add_executable(add_two_ints_server src/add_two_ints_server.cpp)
<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-23"></span>rosbuild_add_executable(add_two_ints_client src/add_two_ints_client.cpp)</pre>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-11-7"></span>

This will create two executables, "add_two_ints_server" and "add_two_ints_client", which by default will go into the "bin" directory.<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-12-7"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-13-7"></span>

For more information on using CMake with ROS, see [CMakeLists](/CMakeLists) <span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-14-7"></span>Now run make:<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-15-7"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-16-6"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-17-5"></span>

<pre><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-33"></span>$ make</pre>

</div>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-143"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-144"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-145"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-146"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-147"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-148"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-149"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-150"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-151"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-152"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-153"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-154"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-155"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-156"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-157"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-158"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-159"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-160"></span>

<div class="buildsystem catkin"><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-34"></span>

### Building your nodes

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-24"></span>

Again edit the beginner_tutorials CMakeLists.txt located at <tt class="backtick">~/catkin_ws/src/beginner_tutorials/CMakeLists.txt</tt> and add the following at the end:<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-22"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-20"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-35"></span>_[https://raw.github.com/ros/catkin_tutorials/master/create_package_srvclient/catkin_ws/src/beginner_tutorials/CMakeLists.txt](https://raw.github.com/ros/catkin_tutorials/master/create_package_srvclient/catkin_ws/src/beginner_tutorials/CMakeLists.txt)_<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-25"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-23"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-4-21"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-19"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-6-14"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-7-10"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-8-9"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-9-9"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-10-9"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-11-8"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-12-8"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-13-8"></span>

<div class="codearea" dir="ltr" lang="en"><script type="text/javascript">document.write('<a href="#" onclick="return togglenumber(\'roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-2686a22f58f4fe36f5224d89a67c332c5b56c4b3\', 27, 1);" \ class="codenumbers">Toggle line numbers<\/a>');</script>

<pre dir="ltr" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-2686a22f58f4fe36f5224d89a67c332c5b56c4b3" lang="en"><span class="line"><span class="LineNumber">[27](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-2686a22f58f4fe36f5224d89a67c332c5b56c4b3_27)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-2686a22f58f4fe36f5224d89a67c332c5b56c4b3_27"></span>add_executable(add_two_ints_server src/add_two_ints_server.cpp)</span>
<span class="line"><span class="LineNumber">[28](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-2686a22f58f4fe36f5224d89a67c332c5b56c4b3_28)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-2686a22f58f4fe36f5224d89a67c332c5b56c4b3_28"></span>target_link_libraries(add_two_ints_server ${catkin_LIBRARIES})</span>
<span class="line"><span class="LineNumber">[29](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-2686a22f58f4fe36f5224d89a67c332c5b56c4b3_29)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-2686a22f58f4fe36f5224d89a67c332c5b56c4b3_29"></span>add_dependencies(add_two_ints_server beginner_tutorials_gencpp)</span>
<span class="line"><span class="LineNumber">[30](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-2686a22f58f4fe36f5224d89a67c332c5b56c4b3_30)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-2686a22f58f4fe36f5224d89a67c332c5b56c4b3_30"></span></span>
<span class="line"><span class="LineNumber">[31](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-2686a22f58f4fe36f5224d89a67c332c5b56c4b3_31)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-2686a22f58f4fe36f5224d89a67c332c5b56c4b3_31"></span>add_executable(add_two_ints_client src/add_two_ints_client.cpp)</span>
<span class="line"><span class="LineNumber">[32](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-2686a22f58f4fe36f5224d89a67c332c5b56c4b3_32)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-2686a22f58f4fe36f5224d89a67c332c5b56c4b3_32"></span>target_link_libraries(add_two_ints_client ${catkin_LIBRARIES})</span>
<span class="line"><span class="LineNumber">[33](#roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-2686a22f58f4fe36f5224d89a67c332c5b56c4b3_33)</span> <span class="LineAnchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.CA-2686a22f58f4fe36f5224d89a67c332c5b56c4b3_33"></span>add_dependencies(add_two_ints_client beginner_tutorials_gencpp)</span>
</pre>

</div>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-14-8"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-5-20"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-6-15"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-7-11"></span>

This will create two executables, <tt class="backtick">add_two_ints_server</tt> and <tt class="backtick">add_two_ints_client</tt>, which by default will go into package directory of your [devel space](/catkin/workspaces#Development_.28Devel.29_Space), located by default at <tt class="backtick">~/catkin_ws/devel/lib/share/<package name></tt>. You can invoke executables directly or you can use rosrun to invoke them. They are not placed in '<prefix>/bin' because that would pollute the PATH when installing your package to the system. If you wish for your executable to be on the PATH at installation time, you can setup an install target, see: [catkin/CMakeLists.txt](/catkin/CMakeLists.txt)<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-8-10"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-9-10"></span>

For more detailed discription of the [CMakeLists.txt](/catkin/CMakeLists.txt) file see: [catkin/CMakeLists.txt](/catkin/CMakeLists.txt)<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-10-10"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-11-9"></span>

Now run <tt class="backtick">catkin_make</tt>:<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-12-9"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-13-9"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-14-9"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-15-8"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-16-7"></span>

<pre><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-36"></span># In your catkin workspace
<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-2-26"></span>cd ~/catkin_ws
<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-3-24"></span>catkin_make</pre>

</div>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-161"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-162"></span>

If your build fails for some reason:<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-163"></span>

*   make sure you have followed the directions in the previous tutorial: [creating the AddTwoInts.srv](/ROS/Tutorials/CreatingMsgAndSrv#Creating_a_srv).<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-164"></span>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-165"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-166"></span>

<div class="buildsystem rosbuild"><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-1-37"></span>

*   type <tt class="backtick">rosls beginner_tutorials/srv_gen/cpp/include/beginner_tutorials/</tt> and check that the <tt class="backtick">.h</tt> file matches the include in the client and server <tt class="backtick">.cpp</tt> files.

</div>

<span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-167"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.line-168"></span><span class="anchor" id="roscpp_tutorials.2BAC8-Tutorials.2BAC8-WritingServiceClient.bottom"></span></div>

<span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span>

Now that you have written a simple service and client, let's [examine the simple service and client](/ROS/Tutorials/ExaminingServiceClient).<span class="anchor" id="line-28"></span><span class="anchor" id="bottom"></span>

</div>

Wiki: ROS/Tutorials/WritingServiceClient(c++) (last edited 2015-03-04 19:10:21 by <span title="AnisKoubaa @ 2.90.69.159[2.90.69.159]">[AnisKoubaa](/AnisKoubaa "AnisKoubaa @ 2.90.69.159[2.90.69.159]")</span>)
